extends layout

append head
  link(rel="stylesheet" href="/stylesheets/index.css")
  script(src="/javascripts/index.js" type="module" defer)
  script(src="/javascripts/deleteListScript.js" type="module" defer)
  script(src="/javascripts/deleteTaskScript.js" type="module" defer)

block content


  div(class='listDiv')
    form(action='/lists' method='post')
      input(type="hidden" name="_csrf" value=csrfToken)
      input(type="text" name="listName" class="listName")
      button(class="addListButton") Add List
      ul
        if lists
          each list in lists
            li(id=`list-${list.id}`)
              a(href=`/lists/${list.id}`)=list.listName
              a(href=`/lists/${list.id}/edit` class="editListButton") ✏️
              button(class="deleteListButton" id=`${list.id}-delete`) 🗑️
              //- a(href=`/lists/${list.id}/delete` class=`${list.id}-deleteListButton`) 🗑️
              //- form(action=`/lists/${list.id}/delete` method="POST" class="listForm")
              //-   button(class="deleteButton") 🗑️

  div(class='taskDiv')
    form(action=`/lists/${listId}` method="POST" )
      input(type="hidden" name="_csrf" value=csrfToken)
      if listId
        input(type="text" name="taskName" class="taskName")
        button(class="addTaskButton") Add Task
      else
        p(class="pleaseAddTask") Please select a List to add a task.
      ul
        if tasks
          each task in tasks
            li(id=`task-${task.id}`)
              if task.taskStatus === true
                a(href=`/lists/${task.listId}/${task.id}`)=task.taskName
                a(href=`/lists/${task.listId}/${task.id}/incomplete`, class="incompleteButton") ✅
                //- a(href=`/lists/${listId}/${task.id}/delete`, class="deleteTaskButton") 🗑️
                button(class="deleteTaskButton" id=`${listId}-${task.id}-delete`) 🗑️
              else
                a(href=`/lists/${task.listId}/${task.id}`)=task.taskName
                a(href=`/lists/${task.listId}/${task.id}/edit`, class="editTaskButton") ✏️
                //- a(href=`/lists/${listId}/${task.id}/delete`, class="deleteTaskButton") 🗑️
                button(class="deleteTaskButton" id=`${listId}-${task.id}-delete`) 🗑️
              //- form(action=`/lists/${listId}/${task.id}/delete` method="POST" class="taskForm")
              //-   button(class="deleteButton") 🗑️


  div(class='sidebar')
    if isEditList
      form(action=`/lists/${listId}/edit` method="POST" )
        input(type="hidden" name="_csrf" value=csrfToken)
        input(type="text" name="listName" class="listName")
        button(class="saveButton") Save

    if isEditTask
      form(action=`/lists/${listId}/${taskId}/edit` method="POST" )
        input(type="hidden" name="_csrf" value=csrfToken)
        label(for="taskName") Task Name
        input(type="text" name="taskName" class="taskName" value=task.taskName)
        select(name="taskStatus", id="taskStatus") Task Status
          option(value="true") Complete
          option(value="false" selected="selected") Incomplete
        label(for="taskDate") Due Date
        input(type="date" name="taskDate" class="taskDate" value=task.taskDate)
        label(for="taskNotes") Task Notes
        textarea(name="taskNotes" id="taskNotes")=task.taskNotes
        button(class="saveButton") Save

    if isTaskDetails
      H1=task.taskName
      ul
        li Status: #{task.taskStatus}
        li Due Date: #{task.taskDate}
        li Notes: #{task.taskNotes}


    footer(class="splashFooter")
      a(href="https://github.com/Willy-Git-Man") William Grossman
      a(href="https://github.com/rogdylan98") Dylan Silva
      a(href="https://github.com/andrwtran") Andrew Tran
      a(href="https://github.com/zestefano") Zachery Estefano
